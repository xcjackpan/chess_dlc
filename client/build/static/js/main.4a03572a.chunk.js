(this["webpackJsonpchess-dlc"]=this["webpackJsonpchess-dlc"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(9),i=a.n(s),u=(a(73),a(10)),o=a(33),h=a.n(o),f=a(125),d=a(36),l=a(6),b=a(25),p=a(124),O=a(22),v=a(24),j=a(23),E=a(19);function y(e){return e[0]<8&&e[1]<8&&e[0]>=0&&e[1]>=0}function N(e,t,a){var n=t[0]-e[0],r=t[1]-e[1];if(!(Math.abs(n)===Math.abs(r))||0===n||0===r)return!1;for(var c=n>0?1:-1,s=r>0?1:-1,i=1;i<Math.abs(n);i++){if(Y([e[0]+i*c,e[1]+i*s],a).type!==z.NONE)return!1}var u=Y(e,a),o=Y(t,a);return o.type===z.NONE||Z(o.type,u.type)}function I(e,t,a){var n=t[0]-e[0],r=t[1]-e[1];if(!(0===n&&0!==r||0!==n&&0===r))return!1;var c=0,s=0;0===n?s=r>0?1:-1:c=n>0?1:-1;for(var i=1;i<Math.abs(n);i++){if(Y([e[0]+i*c,e[1]+i*s],a).type!==z.NONE)return!1}var u=Y(e,a),o=Y(t,a);return o.type===z.NONE||Z(o.type,u.type)}function T(e,t,a){var n=Y(e,a),r=Y(t,a),c=n.type>0?1:-1;if(n.hasMoved||r.hasMoved||e[0]!==t[0])return!1;for(var s=t[1]-e[1],i=s>0?1:-1,u=1;u<Math.abs(s);u++){if(Y([e[0],e[1]+u*i],a).type!==z.NONE)return!1}return!(H(e,c,a)||H([e[0],e[1]+i],c,a)||H([e[0],e[1]+2*i],c,a))}function m(e){return[[e[0]-1,e[1]-2],[e[0]+1,e[1]-2],[e[0]-1,e[1]+2],[e[0]+1,e[1]+2],[e[0]-2,e[1]-1],[e[0]+2,e[1]-1],[e[0]-2,e[1]+1],[e[0]+2,e[1]+1]]}function _(e){return[[e[0]-1,e[1]-1],[e[0]+1,e[1]-1],[e[0]-1,e[1]+1],[e[0]+1,e[1]+1],[e[0],e[1]-1],[e[0]+1,e[1]],[e[0]-1,e[1]],[e[0],e[1]+1]]}function H(e,t,a){var n=m(e).some((function(e){var n=Y(e,a);return Math.abs(n.type)===z.WHITE_KNIGHT&&Z(n.type,t)})),r=[[e[0]-1,e[1]-1],[e[0]-1,e[1]+1]].some((function(e){var n=Y(e,a);return Math.abs(n.type)===z.WHITE_PAWN&&Z(n.type,t)})),c=_(e).some((function(e){var n=Y(e,a);return Math.abs(n.type)===z.WHITE_KING&&Z(n.type,t)})),s=[z.WHITE_ROOK,z.WHITE_QUEEN,z.WHITE_ELEPHANT],i=[[1,0],[0,1],[-1,0],[0,-1]].some((function(n){for(var r=z.NONE,c=n[0],i=n[1];r===z.NONE;)r=Y([e[0]+c,e[1]+i],a).type,c+=n[0],i+=n[1];return!(!s.includes(Math.abs(r))||!Z(r,t))})),u=[z.WHITE_BISHOP,z.WHITE_QUEEN],o=[[1,1],[-1,1],[1,-1],[-1,-1]].some((function(n){for(var r=0,c=n[0],s=n[1];0===r;)r=Y([e[0]+c,e[1]+s],a).type,c+=n[0],s+=n[1];return u.includes(Math.abs(r))&&Z(r,t)}));return c||n||r||i||o}var g=function e(t){Object(E.a)(this,e),this.type=void 0,this.enPassantable=0,this.hasMoved=!1,this.type=t},K=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(){return Object(E.a)(this,a),t.call(this,z.INVALID)}return Object(O.a)(a,[{key:"validateMove",value:function(){return[!1,{}]}},{key:"postMove",value:function(){}},{key:"turnTick",value:function(){}}]),a}(g),W=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(){return Object(E.a)(this,a),t.call(this,z.NONE)}return Object(O.a)(a,[{key:"validateMove",value:function(){return[!1,{}]}},{key:"postMove",value:function(){}},{key:"turnTick",value:function(){}}]),a}(g),P=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(E.a)(this,a),t.call(this,e)}return Object(O.a)(a,[{key:"validateMove",value:function(e,t,a){if(!y(t))return[!1,{}];if(e[1]===t[1]){if(e[0]+-1===t[0])return[Y(t,a).type===z.NONE,{}];if(e[0]+-2===t[0])return[Y(t,a).type===z.NONE&&!this.hasMoved,{}]}else if([e[1]-1,e[1]+1].includes(t[1])&&e[0]+-1===t[0]){if(Y(t,a).type!==z.NONE&&Z(Y(t,a).type,this.type))return[!0,{}];if(Y([t[0]- -1,t[1]],a).type===-1*this.type&&Y([t[0]- -1,t[1]],a).enPassantable>0)return[!0,{enpassant:!0}]}return[!1,{}]}},{key:"postMove",value:function(e,t,a){var n=this.type>0?-1:1;e[1]===t[1]&&e[0]+2*n===t[0]&&(this.enPassantable=2),this.hasMoved||(this.hasMoved=!0)}},{key:"turnTick",value:function(){this.enPassantable>0&&(this.enPassantable-=1)}}]),a}(g),x=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(E.a)(this,a),t.call(this,e)}return Object(O.a)(a,[{key:"validateMove",value:function(e,t,a){return y(t)?[N(e,t,a),{}]:[!1,{}]}},{key:"postMove",value:function(){this.hasMoved||(this.hasMoved=!0)}},{key:"turnTick",value:function(){}}]),a}(g),w=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(E.a)(this,a),t.call(this,e)}return Object(O.a)(a,[{key:"validateMove",value:function(e,t,a){if(!y(t))return[!1,{}];var n=m(e),r=!1;if(n.forEach((function(e){F(e,t)&&(r=!0)})),!r)return[!1,{}];var c=Y(t,a);return[c.type===z.NONE||Z(c.type,this.type),{}]}},{key:"postMove",value:function(){this.hasMoved||(this.hasMoved=!0)}},{key:"turnTick",value:function(){}}]),a}(g),A=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(E.a)(this,a),t.call(this,e)}return Object(O.a)(a,[{key:"validateMove",value:function(e,t,a){if(!y(t))return[!1,{}];if(I(e,t,a))return[!0,{}];var n=Y(t,a);return!Z(this.type,n.type)&&(n.type===z.WHITE_KING||n.type===z.BLACK_KING)?[T(t,e,a),{castle:!0,kingPos:t,rookPos:e}]:[!1,{}]}},{key:"postMove",value:function(){this.hasMoved||(this.hasMoved=!0)}},{key:"turnTick",value:function(){}}]),a}(g),k=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(E.a)(this,a),t.call(this,e)}return Object(O.a)(a,[{key:"validateMove",value:function(e,t,a){if(!y(t))return[!1,{}];var n=_(e),r=!1;n.forEach((function(e){F(e,t)&&(r=!0)}));var c=Y(t,a);return r?[c.type===z.NONE||Z(c.type,this.type),{}]:!Z(this.type,c.type)&&(c.type===z.WHITE_ROOK||c.type===z.BLACK_ROOK)?[T(e,t,a),{castle:!0,kingPos:e,rookPos:t}]:[!1,{}]}},{key:"postMove",value:function(){this.hasMoved||(this.hasMoved=!0)}},{key:"turnTick",value:function(){}}]),a}(g),M=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(E.a)(this,a),t.call(this,e)}return Object(O.a)(a,[{key:"validateMove",value:function(e,t,a){if(!y(t))return[!1,{}];var n=N(e,t,a),r=I(e,t,a);return[n||r,{}]}},{key:"postMove",value:function(){this.hasMoved||(this.hasMoved=!0)}},{key:"turnTick",value:function(){}}]),a}(g),B=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(E.a)(this,a),t.call(this,e)}return Object(O.a)(a,[{key:"validateMove",value:function(e,t,a){if(!y(t))return[!1,{}];var n=t[0]-e[0],r=t[1]-e[1];if(!(0===n&&0!==r||0!==n&&0===r))return[!1,{}];var c=0,s=0;0===n?s=r>0?1:-1:c=n>0?1:-1;for(var i={},u=1;u<Math.abs(n);u++){var o=Y([e[0]+u*c,e[1]+u*s],a);if(o.type!==z.NONE&&Z(o.type,this.type)){if(0!==Object.keys(i).length)return[!1,{}];i={crushed:[e[0]+u*c,e[1]+u*s]}}else if(o.type!==z.NONE&&!Z(o.type,this.type))return[!1,{}]}var h=Y(e,a),f=Y(t,a);return[f.type===z.NONE||Z(f.type,h.type),i]}},{key:"postMove",value:function(){this.hasMoved||(this.hasMoved=!0)}},{key:"turnTick",value:function(){}}]),a}(g);function L(e){return e===z.INVALID?new K:e===z.WHITE_PAWN||e===z.BLACK_PAWN?new P(e):e===z.WHITE_BISHOP||e===z.BLACK_BISHOP?new x(e):e===z.WHITE_KNIGHT||e===z.BLACK_KNIGHT?new w(e):e===z.WHITE_ROOK||e===z.BLACK_ROOK?new A(e):e===z.WHITE_KING||e===z.BLACK_KING?new k(e):e===z.WHITE_QUEEN||e===z.BLACK_QUEEN?new M(e):e===z.WHITE_ELEPHANT||e===z.BLACK_ELEPHANT?new B(e):new W}function S(e){for(var t={},a=0,n=Object.entries(e);a<n.length;a++){var r=Object(u.a)(n[a],2),c=r[0],s=r[1];("hasMoved"!==c||s)&&("enPassantable"===c&&0===s||(t[c]=s))}return JSON.stringify(t)}var C=-1,G=0,R=1,U=2,Q=-100,D=-99,J=0,q=1,V=-1,z={INVALID:-100,NONE:0,WHITE_PAWN:1,WHITE_KNIGHT:2,WHITE_BISHOP:3,WHITE_ROOK:4,WHITE_QUEEN:5,WHITE_KING:6,WHITE_ELEPHANT:7,BLACK_PAWN:-1,BLACK_KNIGHT:-2,BLACK_BISHOP:-3,BLACK_ROOK:-4,BLACK_QUEEN:-5,BLACK_KING:-6,BLACK_ELEPHANT:-7};function F(e,t){return e[0]===t[0]&&e[1]===t[1]}function X(e,t){var a=!1;return e.forEach((function(e){F(e,t)&&(a=!0)})),a}function Y(e,t){return e[0]>=0&&e[1]>=0&&e[0]<8&&e[1]<8?t[e[0]][e[1]]:L(z.INVALID)}function Z(e,t){return 0===e||0===t||(e<0?t>0:t<0)}var $=a(47),ee=a.n($),te=a(62),ae=(a(60),a(127)),ne=a(126),re=a(123),ce=a(128),se=a.p+"static/media/bb.56a2c92d.svg",ie=a.p+"static/media/bn.27a579a3.svg",ue=a.p+"static/media/bp.ad68fd51.svg",oe=a.p+"static/media/bq.ad02b982.svg",he=a.p+"static/media/bk.58dce528.svg",fe=a.p+"static/media/br.b59b4fc8.svg",de=a.p+"static/media/wb.7727c6d1.svg",le=a.p+"static/media/wn.45cb58b5.svg",be=a.p+"static/media/wp.d372867e.svg",pe=a.p+"static/media/wq.805d8b1e.svg",Oe=a.p+"static/media/wk.518bdd4e.svg",ve=a.p+"static/media/wr.db9d31b1.svg",je=a.p+"static/media/we.74e8df6f.svg",Ee=a.p+"static/media/be.8913aa62.svg";function ye(e,t){var a=JSON.parse(e),n=[[],[],[],[],[],[],[],[]];a.boardState.forEach((function(e,t){e.forEach((function(e){n[t].push(function(e){var t=JSON.parse(e),a=L(t.type);return t.hasOwnProperty("enPassantable")?a.enPassantable=t.enPassantable:a.enPassantable=0,t.hasOwnProperty("hasMoved")?a.hasMoved=t.hasMoved:a.hasMoved=!1,a}(e))}))})),t===V&&(n=Te(n));var r={boardState:n,currTurn:a.currTurn};return a.hasOwnProperty("winner")&&(r.winner=a.winner),r}function Ne(e,t,a,n,r){var c=e;a===V&&(c=Te(c));var s=[[],[],[],[],[],[],[],[]];c.forEach((function(e,t){e.forEach((function(e){s[t].push(S(e))}))}));var i={boardState:s,currTurn:t};return n?i.winner=a:r&&(i.winner=D),JSON.stringify(i)}function Ie(e){var t=[];return e.forEach((function(e,a){t.push([]),e.forEach((function(e){t[a].push(L(e))}))})),t}function Te(e){return e.slice(0).reverse().map((function(e){return e.slice(0).reverse()}))}function me(e,t,a,r){return Object(n.jsx)("div",{className:"square".concat(a?" selected":""),onClick:function(){r(e)},children:Object(n.jsx)("img",{className:"piece",src:function(e){switch(e){case z.WHITE_ELEPHANT:return je;case z.BLACK_ELEPHANT:return Ee;case z.BLACK_BISHOP:return se;case z.BLACK_KING:return he;case z.BLACK_KNIGHT:return ie;case z.BLACK_PAWN:return ue;case z.BLACK_QUEEN:return oe;case z.BLACK_ROOK:return fe;case z.WHITE_BISHOP:return de;case z.WHITE_KING:return Oe;case z.WHITE_KNIGHT:return le;case z.WHITE_PAWN:return be;case z.WHITE_QUEEN:return pe;case z.WHITE_ROOK:return ve}}(t)})},"".concat(e[0],"-").concat(e[1]))}function _e(e,t,a,n){var r=[[],[],[],[],[],[],[],[]];e.forEach((function(e,t){e.forEach((function(e){r[t].push(function(e){var t;return e.type===z.INVALID?new K:((t=e.type===z.WHITE_PAWN||e.type===z.BLACK_PAWN?new P(e.type):e.type===z.WHITE_BISHOP||e.type===z.BLACK_BISHOP?new x(e.type):e.type===z.WHITE_KNIGHT||e.type===z.BLACK_KNIGHT?new w(e.type):e.type===z.WHITE_ROOK||e.type===z.BLACK_ROOK?new A(e.type):e.type===z.WHITE_KING||e.type===z.BLACK_KING?new k(e.type):e.type===z.WHITE_QUEEN||e.type===z.BLACK_QUEEN?new M(e.type):e.type===z.WHITE_ELEPHANT||e.type===z.BLACK_ELEPHANT?new B(e.type):new W).enPassantable=e.enPassantable,t.hasMoved=e.hasMoved,t)}(e))}))}));var c=[];if(n.hasOwnProperty("castle")&&n.castle){var s=n.rookPos,i=n.kingPos,u=s[1]-i[1]>0?1:-1,o=[i[0],i[1]+2*u-u],h=[i[0],i[1]+2*u];r[h[0]][h[1]]=Y(i,r),r[o[0]][o[1]]=Y(s,r),c.push([i,h]),c.push([s,o]),r[i[0]][i[1]]=L(z.NONE),r[s[0]][s[1]]=L(z.NONE)}else if(n.hasOwnProperty("enpassant")&&n.enpassant){c.push([t,a]),r[a[0]][a[1]]=Y(t,r),r[t[0]][t[1]]=L(z.NONE);var f=Y(a,r).type===z.WHITE_PAWN?1:-1;r[a[0]-f][a[1]]=L(0)}else c.push([t,a]),r[a[0]][a[1]]=Y(t,r),r[t[0]][t[1]]=L(0);return c.forEach((function(t){r[t[1][0]][t[1][1]].postMove(t[0],t[1],e)})),r.forEach((function(e,t){e.forEach((function(e,a){e.turnTick([a,t],r)}))})),r}var He=function(e){var t=e.currPlayer,a=e.currTurn,c=e.currWinner,s=Object(r.useState)([-1,-1]),i=Object(u.a)(s,2),o=i[0],h=i[1],f=Object(r.useState)(J),d=Object(u.a)(f,2),l=d[0],b=d[1];function p(){return(p=Object(te.a)(ee.a.mark((function n(r,c,s){var i;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=Ne(r,-1*a,t,c,s),c?b(t):s&&b(D);case 2:if(!e.sendToSocket(i)){n.next=6;break}return e.updateBoardState(r),n.abrupt("break",10);case 6:return n.next=8,new Promise((function(e){return setTimeout(e,1)}));case 8:n.next=2;break;case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function O(n){if(F(n,o))h([-1,-1]);else if(F(o,[-1,-1]))h(n);else{var r=e.boardState[o[0]][o[1]];if(r.type!==z.NONE){if(a===t&&!Z(r.type,t)){var c=r.validateMove(o,n,e.boardState),s=Object(u.a)(c,2),i=s[0],f=s[1];if(i){var d=function(a,n,r){var c=_e(e.boardState,a,n,r),s=[-1,-1],i=[-1,-1];return c.forEach((function(e,a){e.forEach((function(e,n){[z.BLACK_KING,z.WHITE_KING].includes(e.type)&&(Z(e.type,t)?s=[a,n]:i=[a,n])}))})),[H(i,t,c),H(s,-1*t,c),c]}(o,n,f),l=Object(u.a)(d,3),b=l[0],O=l[1],v=l[2];if(!b){var j=function(e){var a=[],n=[[1,0],[0,1],[-1,0],[0,-1]],r=[[1,1],[-1,1],[1,-1],[-1,-1]];return e.forEach((function(c,s){c.forEach((function(c,i){if(c.type!==z.NONE&&Z(t,c.type)){var u=[s,i],o=[];[z.BLACK_KING,z.WHITE_KING].includes(c.type)?_(u).forEach((function(e){o.push(e)})):[z.BLACK_BISHOP,z.WHITE_BISHOP].includes(c.type)?r.forEach((function(e){for(var t=e[0],a=e[1];Math.abs(t)<=8&&Math.abs(a)<=8;)o.push([s+t,i+a]),t+=e[0],a+=e[1]})):[z.BLACK_KNIGHT,z.WHITE_KNIGHT].includes(c.type)?m(u).forEach((function(e){o.push(e)})):[z.BLACK_ROOK,z.WHITE_ROOK].includes(c.type)?n.forEach((function(e){for(var t=e[0],a=e[1];Math.abs(t)<=8&&Math.abs(a)<=8;)o.push([s+t,i+a]),t+=e[0],a+=e[1]})):[z.BLACK_QUEEN,z.WHITE_QUEEN].includes(c.type)?(r.forEach((function(e){for(var t=e[0],a=e[1];Math.abs(t)<=8&&Math.abs(a)<=8;)o.push([s+t,i+a]),t+=e[0],a+=e[1]})),n.forEach((function(e){for(var t=e[0],a=e[1];Math.abs(t)<=8&&Math.abs(a)<=8;)o.push([s+t,i+a]),t+=e[0],a+=e[1]}))):[z.BLACK_PAWN,z.WHITE_PAWN].includes(c.type)&&(o.push([s+1,i]),o.push([s+1,i+1]),o.push([s+1,i-1])),o.forEach((function(t){var n=c.validateMove([s,i],t,e);n[0]&&a.push([[s,i],t,n[1]])}))}}))})),a.every((function(a){var n=_e(e,a[0],a[1],a[2]),r=[-1,-1];return n.forEach((function(e,a){e.forEach((function(e,n){[z.BLACK_KING,z.WHITE_KING].includes(e.type)&&Z(e.type,t)&&(r=[a,n])}))})),H(r,-1*t,n)}))}(v);return function(e,t,a){p.apply(this,arguments)}(v,O&&j,!O&&j),void h([-1,-1])}}}h(n)}else h(n)}}return Object(r.useEffect)((function(){b(c)}),[c]),Object(n.jsxs)("div",{children:[Object(n.jsxs)(ne.a,{fullWidth:!0,open:l!==Q,onClose:function(){b(Q)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)("span",{className:"game-over-text",children:l===D?"Draw by stalemate. No more valid moves.":(l===q?"White":"Black")+" has won by checkmate."})}),Object(n.jsx)(re.a,{children:Object(n.jsx)(ae.a,{onClick:function(){b(Q)},children:"GG!"})})]}),Object(n.jsx)("div",{className:"board",children:e.boardState.map((function(e,t){return Object(n.jsx)("div",{className:"row",children:e.map((function(e,a){return me([t,a],e.type,F(o,[t,a]),O)}))},t)}))})]})},ge=(a(96),[[0,0,0,1,1,1,0,0],[0,0,0,0,6,0,0,0]]),Ke=[[0,0,-1,-1,-1,0,0,0],[0,0,0,-6,0,0,0,0]],We=[[0,3],[0,4],[0,5],[1,4]],Pe=[[0,2],[0,3],[0,4],[1,3]],xe=(z.NONE,z.WHITE_ROOK,z.NONE,z.WHITE_BISHOP,z.NONE,z.WHITE_KNIGHT,z.NONE,z.WHITE_QUEEN,z.NONE,z.WHITE_PAWN,[z.NONE,z.WHITE_ROOK,z.WHITE_BISHOP,z.WHITE_KNIGHT,z.WHITE_QUEEN,z.WHITE_PAWN]);function we(e){switch(e){case z.BLACK_BISHOP:return 3;case z.BLACK_KING:return 0;case z.BLACK_KNIGHT:return 3;case z.BLACK_PAWN:return 1;case z.BLACK_QUEEN:return 9;case z.BLACK_ROOK:return 5;case z.WHITE_BISHOP:return 3;case z.WHITE_KING:return 0;case z.WHITE_KNIGHT:return 3;case z.WHITE_PAWN:return 1;case z.WHITE_QUEEN:return 9;case z.WHITE_ROOK:return 5;case z.WHITE_ELEPHANT:case z.BLACK_ELEPHANT:return 7}return 0}var Ae=function(e){var t=e.currPlayer,a=e.submitDraft,c=Object(r.useState)(t===V?Ke:ge),s=Object(u.a)(c,2),i=s[0],o=s[1],h=Object(r.useState)(36),f=Object(u.a)(h,2),d=f[0],l=f[1],b=Object(r.useState)([-1,-1]),p=Object(u.a)(b,2),O=p[0],v=p[1];function j(e){t!==J&&(F(e,O)?v([-1,-1]):v(e))}return Object(n.jsxs)("div",{className:"draft",children:[Object(n.jsx)("div",{className:"draft-board",children:i.map((function(e,t){return Object(n.jsx)("div",{className:"row",children:e.map((function(e,a){return me([t,a],e,F(O,[t,a]),j)}))},t)}))}),Object(n.jsx)("div",{className:"available-pieces",children:Object(n.jsx)("div",{className:"row",children:(F(O,[-1,-1])||t===q&&X(We,O)||t===V&&X(Pe,O)?[]:xe.map((function(e){return t*e}))).map((function(e,t){return me([-1,t],e,F(O,[-1,t]),(function(){!function(e){var t=[[],[]],a=36;i.forEach((function(n,r){n.forEach((function(n,c){F(O,[r,c])?(t[r].push(e),a-=we(e)):(t[r].push(n),a-=we(n))}))})),o(t),l(a)}(e)}))}))})}),Object(n.jsxs)("div",{className:"points-and-submit",children:[Object(n.jsx)("div",{className:"points",children:Object(n.jsx)("strong",{children:d})}),Object(n.jsx)(ae.a,{variant:"contained",size:"large",disabled:t===J,onClick:function(){return a(i,d)},children:Object(n.jsx)("span",{className:"button-text",children:"Submit draft"})})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("p",{children:"This is the draft phase. Here, you can configure your board in the interface above before squaring off against your opponent."}),Object(n.jsx)("p",{children:"Select a square to see what pieces are possible to be drafted there. Hit Submit when you're done. When both you and your opponent have submitted drafts, you'll automatically be brought into the game phase."}),Object(n.jsxs)("p",{children:["A few ground rules here:",Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("strong",{children:"The king and the three pawns ahead of it cannot be moved."})," This rule was added to prevent instant checkmate cheeses."]}),Object(n.jsx)("li",{children:Object(n.jsx)("strong",{children:"A draft is valid if and only if it has a point total greater than or equal to 0"})})]})]})]})]})},ke=[[-4,-2,-3,-5,-6,-3,-2,-4],[-1,-1,-1,-1,-1,-1,-1,-1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[4,2,3,5,6,3,2,4]];var Me=function(){var e=Object(p.a)(["chess-dlc"]),t=Object(u.a)(e,3),a=t[0],c=t[1],s=(t[2],Object(r.useState)({gameId:Object(l.g)().pathname.split("/").pop(),gameState:C,currPlayer:Q,currTurn:q,currWinner:Q,boardState:Ie(ke)})),i=Object(u.a)(s,2),o=i[0],f=i[1],d=Object(r.useState)(null),O=Object(u.a)(d,2),v=O[0],j=O[1];return Object(r.useEffect)((function(){var e=a.hasOwnProperty("chess-dlc")&&a["chess-dlc"].hasOwnProperty("player");h.a.get("/join/".concat(o.gameId),{params:{cookiePresent:e}}).then((function(t){var n=J;if(e?n=a["chess-dlc"].player:t.data.timesJoined<=2&&(n=t.data.waitingFor,c("chess-dlc",{player:t.data.waitingFor,gameId:o.gameId},{path:"/game/".concat(o.gameId),maxAge:259200})),t.data.board){var r=ye(t.data.board,n);f(Object(b.a)(Object(b.a)({},o),{},{currPlayer:n,gameId:o.gameId,gameState:t.data.gameState,boardState:r.boardState,currTurn:r.currTurn,currWinner:r.hasOwnProperty("winner")?r.winner:Q}))}else f(Object(b.a)(Object(b.a)({},o),{},{currPlayer:n,gameId:o.gameId,gameState:t.data.gameState,currTurn:q}));var s=window.location,i=("https:"===s.protocol?"wss://":"ws://")+s.host+"/websocket/".concat(o.gameId),u=new WebSocket(i);u.onopen=function(){j(u)},u.onmessage=function(e){f((function(t){var a=ye(e.data,t.currPlayer);console.log(a);var n=Object(b.a)(Object(b.a)({},t),{},{gameState:U,boardState:a.boardState,currTurn:a.currTurn,currWinner:a.hasOwnProperty("winner")?a.winner:Q});return console.log(n),n}))}}))}),[]),o.gameState===C?Object(n.jsx)("div",{children:"Loading..."}):o.gameState===R||o.gameState===G?Object(n.jsx)(Ae,{currPlayer:o.currPlayer,submitDraft:function(e,t){if(!(t<0)){var a=Ie(e);o.currPlayer===V&&(a=Te(a));var n=[];a.forEach((function(e,t){n.push([]),e.forEach((function(e){n[t].push(S(e))}))}));var r=JSON.stringify(n);h.a.post("/draft/".concat(o.gameId),{currPlayer:o.currPlayer,draft:r.substring(1,r.length-1)})}}}):Object(n.jsx)(He,{boardState:o.boardState,currPlayer:o.currPlayer,currTurn:o.currTurn,currWinner:o.currWinner,sendToSocket:function(e){return null!==v&&1===v.readyState&&(v.send(e),!0)},updateBoardState:function(e){f(Object(b.a)(Object(b.a)({},o),{},{currTurn:-1*o.currTurn,boardState:e}))}})};a(99);var Be=function(e){var t=e.createGame,a=Object(l.f)();return Object(n.jsxs)("div",{className:"lobby",children:[Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["Draft Chess ",Object(n.jsx)("span",{style:{fontSize:"15px"},children:"(the name is a WIP)"})]})}),Object(n.jsxs)("p",{children:["This is a simple web client for an experimental ",Object(n.jsx)("a",{href:"https://en.wikipedia.org/wiki/Chess_variant",children:"chess variant"}),' based on the concept of "drafting a board". Each game has two phases:',Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("strong",{children:"Draft:"})," Where players draft pieces to build out their initial board"]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("strong",{children:"Game:"})," Where players play out a game of chess using the board they drafted"]})]})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"How to start:"})," To start a game, simply click the buttons to be redirected to a generated room. Send the URL for the room to a friend and the first visitor will play with you."]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Disclaimer:"})," This variant is a work in progress! The primary purpose of this app is for me to have a \"playtesting\" area to figure out what's fun and what's not - as such, the rules are subject to change at my whim."]}),Object(n.jsx)("p",{children:Object(n.jsx)("a",{href:"https://github.com/xcjackpan/chess_dlc",children:"Here's the source code if you're a nerd"})})]}),Object(n.jsxs)("div",{className:"buttons",children:[Object(n.jsx)(ae.a,{variant:"contained",size:"large",onClick:function(){t(a,q)},children:Object(n.jsx)("span",{className:"button-text",children:"Create game as white"})}),Object(n.jsx)(ae.a,{variant:"contained",size:"large",onClick:function(){t(a,V)},children:Object(n.jsx)("span",{className:"button-text",children:"Create game as black"})})]})]})};var Le=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0];function c(e,t){h.a.post("/create",{createdBy:t}).then((function(t){var a=t.data;e.push("/game/".concat(a.gameId))}))}return t[1],a?Object(n.jsx)("div",{className:"main",children:Object(n.jsx)("div",{children:"Loading"})}):Object(n.jsx)(f.a,{children:Object(n.jsx)(d.a,{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/game/:gameId",render:function(){return Object(n.jsx)("div",{className:"main",children:Object(n.jsx)(Me,{})})}}),Object(n.jsx)(l.a,{render:function(){return Object(n.jsx)("div",{className:"main",children:Object(n.jsx)(Be,{createGame:c})})}})]})})})};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(Le,{})}),document.getElementById("root"))},60:function(e,t,a){},73:function(e,t,a){},96:function(e,t,a){},99:function(e,t,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.4a03572a.chunk.js.map